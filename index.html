<html>

<head>
  <title>Vue.js Pet Depot</title>
  <script src="https://cdn.jsdelivr.net/npm/vue@2.7.10/dist/vue.js"></script>
  <!-- We are using Font Awesome to create the cart icon  -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
    integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
  <div id="app">
    <header>
      <h1 v-text="header"></h1>
      <button v-on:click="showCheckout">
        <!-- 'cartItemCount' is used the same way as a data property. -->
        {{ cartItemCount }}
        <!-- add the cart icon -->
        <span><i class="fa-solid fa-cart-shopping"></i> Checkout</span>
      </button>
    </header>
    <main>
      <div v-if="showProduct">
        <figure>
          <!-- bind the 'src' attribute to the 'product.image' in 'data' -->
          <img v-bind:src="product.image" alt="sleepy dnd" />
        </figure>
        <h2 v-text="product.title"></h2>
        <p v-html="product.description"></p>
        <!-- The double curly brackets is te shorter version of 'v-text' - mustache syntax -->
        <p>Price: {{ product.price }}</p>
        <!-- <input type="button" value="add" @click="addItem" /> -->
        <!-- only show the button when 'canAddToCart' is true -->
        <!-- <button @click="addToCart" v-show="canAddToCart">Add to Cart</button> -->
        <!-- v-show whatever products customer is adding more than the stock limit - it will only show if canAddToCart is true -->
        <button @click="addToCart" v-show="canAddToCart" v-if="canAddToCart">
          Add to Cart
        </button>
        <button disabled="disabled" v-else>Add to Cart</button>
      </div>
      <div v-else>
        <h2>Checkout</h2>
        <p>
          <strong>First Name:</strong>
          <!-- This input field is bound to firstName in the order object -->
          <!-- .trim removes whitespace only from the beginning -->
          <input v-model.trim="order.firstName">
        </p>
        <p>
          <strong>Last Name:</strong>
          <!-- This input field is bound to lastName in the order object -->
          <input v-model.trim="order.lastName">
        </p>
        <p>
          <strong>Address:</strong>
          <input v-model="order.address">
        </p>
        <p>
          <strong>City:</strong>
          <input v-model="order.city">
        </p>
        <p>
          <strong>Zip:</strong>
          <input v-model="order.zip">
        </p>
        <p>
          <strong>State:</strong>
          <select v-model="order.state">
            <option disabled value="">State</option>
            <option v-for="(state, key) in states" v-bind:value="state">{{ key }}</option>
          </select>
        </p>
        <p>
          <input type="radio" id="home" value="Home" v-model="order.method" /><label for="home">Home</label><input
            type="radio" id="business" value="Business" v-model="order.method" /><label for="business">Business</label>
        </p>
        <h2>Order Information</h2>
        <p>First Name: {{ order.firstName }}</p>
        <p>Last Name: {{ order.lastName }}</p>
        <p>Address: {{ order.address }}</p>
        <p>City: {{ order.city }}</p>
        <p>Zip: {{ order.zip }}</p>
        <p>State: {{ order.state }}</p>
        <p>Gift: {{ order.gift }}</p>
        <p>Method: {{ order.method }}</p>
        <button v-on:click="submitForm">Place Order</button>
      </div>
    </main>
  </div>
  <script type="text/javascript">
    //
    var vueInstance = new Vue({
      el: "#app",
      data: {
        header: "Vue.js Pet Depot",
        product: {
          id: 1001,
          title: "Cat Food, 25lb bag",
          description:
            "A 25 pound bag of <em>irresistible</em>, organic goodness for your cat.",
          price: 2000,
          image:
            "https://static.wikia.nocookie.net/seuss/images/9/9a/Img_drseuss_cat.gif",
          availableInventory: 5,
        },
        cart: [], // array to store items in shopping cart
        showProduct: true,
        order: {
          firstName: "",
          lastName: "",
          address: "",
          city: "",
          zip: "",
          state: "",
          method: "Home",
          gift: "Send as a Gift",
          sendGift: "Send as a Gift",
          dontSendGift: "Send as a Gift",
        },
        states: {
          AL: "Alaska",
          AR: "Arizona",
          CA: "California",
          NV: "Nevada",
        }
      },
      methods: {
        addToCart: function () {
          this.cart.push(this.product.id); // pushing product id to the cart array
          console.log(this.cart);
        },
        showCheckout() {
          // console.log(this.showProduct);
          // if this.showProduct is true return false else true
          // if showCheckout returns true it shows the products if its false it shows checkout
          this.showProduct = this.showProduct ? false : true
        },
        submitForm() {
          alert("Order Submitted");
        }
      },
      computed: {
        // the Computed Property object
        cartItemCount: function () {
          // the property name
          // its value is calculated when it is called
          console.log("cartItemCount");
          return this.cart.length || "";
        },
        // checks whether we are able to add items to the cart based on what's there in our available inventory 
        canAddToCart() {
          // add and check available inventory
          console.log("canAddToCart");
          //availableInventory greater than carItemCount
          return this.product.availableInventory > this.cartItemCount;
        },
      },
    });
  </script>
</body>

</html>